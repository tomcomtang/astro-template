---
// Page navigation configuration
const pages = [
  { path: "/", label: "Home" },
  { path: "/components", label: "Components" },
  { path: "/inter", label: "Interactive" },
  { path: "/md", label: "Markdown" },
  { path: "/mdx", label: "MDX" },
  { path: "/static", label: "Static" },
];

// Get current path
const currentPath = Astro.url.pathname;
---

<nav class="page-navigator" id="pageNavigator">
  <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation menu">
    <span class="icon-wrapper">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="20"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2.5"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="menu-icon"
      >
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="20"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2.5"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="close-icon"
      >
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </span>
  </button>
  <div class="nav-menu-wrapper">
    <ul class="nav-menu" id="navMenu">
      {
        pages.map((page) => (
          <li>
            <a
              href={page.path}
              class={currentPath === page.path ? "active" : ""}
            >
              <span class="link-text">{page.label}</span>
              {currentPath === page.path && (
                <span class="active-indicator">‚óè</span>
              )}
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</nav>

<script>
  const navigator = document.getElementById("pageNavigator");
  const toggle = document.getElementById("navToggle");
  const menu = document.getElementById("navMenu");

  if (toggle && menu) {
    toggle.addEventListener("click", () => {
      navigator?.classList.toggle("open");
    });

    // Close menu when clicking outside
    document.addEventListener("click", (e) => {
      if (navigator && !navigator.contains(e.target as Node)) {
        navigator.classList.remove("open");
      }
    });

    // Close menu when clicking on a link
    menu.querySelectorAll("a").forEach((link) => {
      link.addEventListener("click", () => {
        navigator?.classList.remove("open");
      });
    });
  }
</script>

<style>
  .page-navigator {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    z-index: 1000;
    font-family: system-ui, sans-serif;
  }

  .nav-toggle {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: radial-gradient(circle at center, #da62c4 0%, #4f39fa 100%);
    border: none;
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow:
      0 8px 24px rgba(79, 57, 250, 0.4),
      0 0 0 0 rgba(79, 57, 250, 0.5);
    transition: all 0.4s cubic-bezier(0.22, 1, 0.36, 1);
    padding: 0;
    position: relative;
    overflow: hidden;
  }

  .nav-toggle:hover {
    transform: scale(1.08) rotate(90deg);
    background: radial-gradient(circle at center, #4f39fa 0%, #da62c4 100%);
    box-shadow:
      0 12px 32px rgba(79, 57, 250, 0.5),
      0 0 0 8px rgba(79, 57, 250, 0.1);
  }

  .nav-toggle:active {
    transform: scale(0.96) rotate(90deg);
  }

  .page-navigator.open .nav-toggle {
    transform: rotate(90deg);
    background: radial-gradient(circle at center, #4f39fa 0%, #da62c4 100%);
  }

  .icon-wrapper {
    position: relative;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1;
  }

  .menu-icon,
  .close-icon {
    position: absolute;
    transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);
  }

  .menu-icon {
    opacity: 1;
    transform: rotate(0deg);
  }

  .close-icon {
    opacity: 0;
    transform: rotate(90deg);
  }

  .page-navigator.open .menu-icon {
    opacity: 0;
    transform: rotate(-90deg);
  }

  .page-navigator.open .close-icon {
    opacity: 1;
    transform: rotate(0deg);
  }

  .nav-menu-wrapper {
    position: absolute;
    bottom: 80px;
    right: 0;
    opacity: 0;
    visibility: hidden;
    transform: translateY(20px) scale(0.95);
    transition: all 0.4s cubic-bezier(0.22, 1, 0.36, 1);
    pointer-events: none;
  }

  .page-navigator.open .nav-menu-wrapper {
    opacity: 1;
    visibility: visible;
    transform: translateY(0) scale(1);
    pointer-events: all;
  }

  .nav-menu {
    list-style: none;
    margin: 0;
    padding: 0.75rem;
    background: rgba(15, 15, 15, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 1rem;
    min-width: 180px;
    backdrop-filter: blur(20px) saturate(180%);
    box-shadow:
      0 20px 60px rgba(0, 0, 0, 0.5),
      0 0 0 1px rgba(255, 255, 255, 0.05) inset,
      0 1px 0 rgba(255, 255, 255, 0.1) inset;
  }

  .nav-menu::before {
    content: "";
    position: absolute;
    top: -1px;
    left: -1px;
    right: -1px;
    height: 2px;
    background: linear-gradient(
      90deg,
      transparent,
      #4f39fa,
      #da62c4,
      transparent
    );
    border-radius: 1rem 1rem 0 0;
    opacity: 0.6;
  }

  .nav-menu li {
    margin: 0.25rem 0;
  }

  .nav-menu a {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.875rem 1rem;
    color: var(--color-text);
    text-decoration: none;
    border-radius: 0.5rem;
    transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);
    font-size: 0.95rem;
    position: relative;
    overflow: hidden;
  }

  .nav-menu a::before {
    content: "";
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    width: 3px;
    background: linear-gradient(180deg, #4f39fa, #da62c4);
    transform: scaleY(0);
    transition: transform 0.3s cubic-bezier(0.22, 1, 0.36, 1);
    border-radius: 0 3px 3px 0;
  }

  .nav-menu a:hover {
    background: rgba(79, 57, 250, 0.15);
    color: rgb(var(--accent-light));
    transform: translateX(4px);
    padding-left: 1.25rem;
  }

  .nav-menu a:hover::before {
    transform: scaleY(1);
  }

  .nav-menu a.active {
    background: linear-gradient(
      135deg,
      rgba(79, 57, 250, 0.2),
      rgba(218, 98, 196, 0.15)
    );
    color: rgb(var(--accent-light));
    font-weight: 600;
    box-shadow: 0 2px 8px rgba(79, 57, 250, 0.2);
  }

  .nav-menu a.active::before {
    transform: scaleY(1);
  }

  .link-text {
    flex: 1;
  }

  .active-indicator {
    color: #da62c4;
    font-size: 0.75rem;
    animation: pulse 2s ease-in-out infinite;
    margin-left: 0.5rem;
  }

  @keyframes pulse {
    0%,
    100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.6;
      transform: scale(0.9);
    }
  }

  /* Mobile responsive */
  @media (max-width: 768px) {
    .page-navigator {
      bottom: 1.5rem;
      right: 1.5rem;
    }

    .nav-toggle {
      width: 56px;
      height: 56px;
    }

    .nav-menu-wrapper {
      bottom: 70px;
    }

    .nav-menu {
      min-width: 160px;
      padding: 0.625rem;
    }

    .nav-menu a {
      padding: 0.75rem 0.875rem;
      font-size: 0.9rem;
    }
  }

  /* Smooth entrance animation */
  @keyframes slideInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .page-navigator {
    animation: slideInUp 0.6s cubic-bezier(0.22, 1, 0.36, 1);
  }
</style>
